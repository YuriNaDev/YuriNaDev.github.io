<!DOCTYPE html>
<html lang="ko">
  <head>
    <!-- Global Metadata --><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="icon" href="/favicon.ico">
<meta name="generator" content="Astro v2.0.6">

<!-- Canonical URL -->
<link rel="canonical" href="https://yrnana.dev/post/2021-08-15-testing-library/">

<!-- Primary Meta Tags -->
<title>testing-library 사용팁 | nana.log</title>
<meta name="title" content="testing-library 사용팁 | nana.log">
<meta name="description" content="요점은 사용자 관점에서 테스트를 작성하자는 것이다.">
<meta name="keywords" content="test,Testing Library">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="article">
<meta property="og:url" content="https://yrnana.dev/post/2021-08-15-testing-library/">
<meta property="og:title" content="testing-library 사용팁 | nana.log">
<meta property="og:description" content="요점은 사용자 관점에서 테스트를 작성하자는 것이다.">
<meta property="og:image" content="https://yrnana.dev/_astro/nana.log.1a2324ba_Z1XgAIx.png">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://yrnana.dev/post/2021-08-15-testing-library/">
<meta property="twitter:title" content="testing-library 사용팁 | nana.log">
<meta property="twitter:description" content="요점은 사용자 관점에서 테스트를 작성하자는 것이다.">
<meta property="twitter:image" content="https://yrnana.dev/_astro/nana.log.1a2324ba_Z1XgAIx.png">

<!-- Font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap">

<!-- Google Ads -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4675264961434940" crossOrigin="anonymous"></script><link rel="stylesheet" href="https://unpkg.com/applause-button/dist/applause-button.css">
  <link rel="stylesheet" href="/_astro/about.4d05d472.css" /><script type="module" src="/_astro/hoisted.69edc630.js"></script>
<script type="module" src="/_astro/page.b7cc8384.js"></script></head>
  <body>
    <div class="container mx-auto px-4 flex flex-col min-h-screen">
      <header class="mt-4 sm:mt-6 flex flex-row items-center">
  <div class="mr-auto">
    <a href="/" class="select-none text-xl sm:text-2xl font-semibold font-mono hover:text-violet-500">
      nana.log
    </a>
  </div>
  <nav class="flex flex-row items-center space-x-4">
    <a href="/about" class="text-sm sm:text-base hover:text-violet-500">
          About
        </a><a href="/archive" class="text-sm sm:text-base hover:text-violet-500">
          Archive
        </a><a href="/tags" class="text-sm sm:text-base hover:text-violet-500">
          Tags
        </a>
  </nav>
</header>
      <main class="py-10 flex-grow">
        <article class="mb-20">
  <header class="text-center mt-10 mb-20">
    
    <h1 class="text-3xl font-semibold">testing-library 사용팁</h1>
    <div class="text-slate-500 mt-4">Aug 15, 2021</div>
    <div class="flex flex-row flex-wrap justify-center space-x-3 mt-4">
          <a href="/tag/test" class="select-none inline-flex items-center text-sm leading-4 rounded-full px-4 py-1.5 text-violet-500 bg-violet-100 hover:text-violet-700 hover:bg-violet-200">
  <span>test</span>
  
</a><a href="/tag/testing-library" class="select-none inline-flex items-center text-sm leading-4 rounded-full px-4 py-1.5 text-violet-500 bg-violet-100 hover:text-violet-700 hover:bg-violet-200">
  <span>Testing Library</span>
  
</a>
        </div>
  </header>
  <div class="markdown">
    <p>리액트로 개발하다보면 테스트는 거의 <code>jest</code> + <code>testing-library</code> 조합을 깔고 가는 듯 하다. <code>CRA</code>도 이 조합으로 기본적으로 세팅되어서 나온다. 가장 최근 <a href="https://2020.stateofjs.com/en-US/technologies/testing/" target="_blank" rel="nofollow">State of JS</a> 테스팅 툴 부문에서도 <code>testing-library</code>가 만족도 랭킹 1위를 기록했다.</p>
<p><code>testing-library</code>는 리액트에 국한된 테스팅 툴은 아니고, <code>DOM Testing Library</code>라는 코어 패키지가 존재하고 뷰나 앵귤러 등 여러 프레임워크에 적용할 수 있도록 별도 패키지로 제공되고 있다.</p>
<h2 id="테스트-속도-vs-신뢰도">테스트 속도 vs 신뢰도<a class="autolink" aria-hidden="true" tabIndex="-1" href="#테스트-속도-vs-신뢰도"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">🔥 Hot take: Test Speed is much less important than Shipping Confidence 🔥</p>— Kent C. Dodds 🌌 (@kentcdodds) <a href="https://twitter.com/kentcdodds/status/1349211410442579968?ref_src=twsrc%5Etfw" target="_blank" rel="nofollow">January 13, 2021</a></blockquote>
<p>먼저 짚고 넘어가고 싶은 부분이다. 물론 테스트코드를 <strong>잘못</strong> 짜서 느리게 실행된다면 문제가 될 수 있다. (불필요한 쿼리 실행 등) 하지만 정상적인 테스트코드가 단지 느리다는 이유로 쿼리를 바꿔야만 할까?</p>
<h3 id="testing-library의-쿼리-우선순위와-쿼리-성능-비교">testing-library의 쿼리 우선순위와 쿼리 성능 비교<a class="autolink" aria-hidden="true" tabIndex="-1" href="#testing-library의-쿼리-우선순위와-쿼리-성능-비교"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h3>
<p><code>testing-library</code>의 <a href="https://testing-library.com/docs/queries/about#priority" target="_blank" rel="nofollow">쿼리 우선순위(Priority)</a>와 쿼리 성능 때문에 가끔 고민이 될 때가 있다.<br/>
<code>testing-library</code>는 유저 인터랙트와 가장 유사하게 테스트를 짜는 것을 권장한다.</p>
<pre class="astro-code" style="background-color:#282c34;overflow-x:auto"><code><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">className</span><span style="color:#56B6C2">=</span><span style="color:#98C379">&quot;submit-button&quot;</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">data-testid</span><span style="color:#56B6C2">=</span><span style="color:#98C379">&quot;submit-button-testid&quot;</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">  등록</span></span>
<span class="line"><span style="color:#ABB2BF">&lt;/</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">&gt;</span></span></code></pre>
<p>이렇게 생긴 버튼이 있다고 치면, 화면을 보는 사용자는 이 버튼의 <code>className</code>이 <code>submit-button</code>인지 <code>data-testid</code>가 <code>submit-button-testid</code> 인지 알고 누르는게 아니다. 그냥 <code>등록</code> 이라고 적힌 <code>버튼</code>이라 누르는거다.</p>
<p>각각의 테스트에 대한 쿼리를 적어보면 아래와 같다.</p>
<pre class="astro-code" style="background-color:#282c34;overflow-x:auto"><code><span class="line"><span style="color:#E5C07B">document</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">querySelector</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#39;.submit-button&#39;</span><span style="color:#ABB2BF">); </span><span style="color:#7F848E">// jsdom에서도 querySelector를 사용할 수 있다.</span></span>
<span class="line"><span style="color:#E5C07B">screen</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getByTestId</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#39;submit-button-testid&#39;</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#E5C07B">screen</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getbyRole</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#39;button&#39;</span><span style="color:#ABB2BF">, { </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">:</span><span style="color:#E06C75"> /등록/</span><span style="color:#ABB2BF"> });</span></span></code></pre>
<p>쿼리 우선순위는 당연히 <code>getByRole</code>이 가장 높다. 그렇다면 뭐가 문제인가 하면 쿼리 속도 차이가 엄청나게 크다는 것이다. 이 버튼 하나만 만들어서 codesandbox에서 테스트를 돌려보니 각각 2ms, 2ms, 11ms를 기록했다. 화면이 복잡할수록, 테스트가 많을 수록 이 차이는 엄청난 차이를 만들어낼것이다.</p>
<p><code>testing-library</code> 레포에서도 <code>getByRole</code>의 성능 문제는 단골 이슈다.<br/>
<a href="https://github.com/testing-library/dom-testing-library/issues/820" target="_blank" rel="nofollow">https://github.com/testing-library/dom-testing-library/issues/820</a><br/>
<a href="https://github.com/testing-library/dom-testing-library/issues/552" target="_blank" rel="nofollow">https://github.com/testing-library/dom-testing-library/issues/552</a></p>
<h3 id="쿼리-우선순위를-우선시-해야하는-이유">쿼리 우선순위를 우선시 해야하는 이유<a class="autolink" aria-hidden="true" tabIndex="-1" href="#쿼리-우선순위를-우선시-해야하는-이유"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h3>
<p>그냥 빠른 <code>getByTestId</code>를 쓰면 안되나? 라고 할 수 있는데 여기에는 맹점이 있다. 예를 들면 나는 사용자에게 <code>등록</code>이라는 버튼을 제공하려고 했는데 실수로 <code>등럭</code>이라고 작성할 수도 있다. 그런데 <code>data-testid</code>를 사용하는 쿼리 셀렉팅에는 전혀 문제가 발생하지 않는다.</p>
<p>이건 다른 얘긴데 <code>className</code> 유무로 스타일을 테스트 하는 것도 문제점이 존재한다. 예를 들면 노란색 버튼을 클릭하면 <code>active</code>라는 <code>className</code>이 붙고 빨간색 버튼으로 바뀌는 토글 버튼이 있다고 가정하자.</p>
<pre class="astro-code" style="background-color:#282c34;overflow-x:auto"><code><span class="line"><span style="color:#C678DD">import</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&#39;./ToggleButton.scss&#39;</span><span style="color:#ABB2BF">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">ToggleButton</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> () </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> [</span><span style="color:#E5C07B">active</span><span style="color:#ABB2BF">, </span><span style="color:#E5C07B">setActive</span><span style="color:#ABB2BF">] </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">useState</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">false</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#C678DD">return</span><span style="color:#ABB2BF"> (</span></span>
<span class="line"><span style="color:#ABB2BF">    &lt;</span><span style="color:#E06C75">button</span></span>
<span class="line"><span style="color:#ABB2BF">      </span><span style="color:#D19A66">className</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#E06C75">active</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">?</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&#39;toggle-button active&#39;</span><span style="color:#ABB2BF"> </span><span style="color:#C678DD">:</span><span style="color:#ABB2BF"> </span><span style="color:#98C379">&#39;toggle-button&#39;</span><span style="color:#C678DD">}</span></span>
<span class="line"><span style="color:#ABB2BF">      </span><span style="color:#D19A66">onClick</span><span style="color:#56B6C2">=</span><span style="color:#C678DD">{</span><span style="color:#ABB2BF">() </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">setActive</span><span style="color:#ABB2BF">((</span><span style="color:#E06C75">state</span><span style="color:#ABB2BF">) </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">!</span><span style="color:#E06C75">state</span><span style="color:#ABB2BF">)</span><span style="color:#C678DD">}</span></span>
<span class="line"><span style="color:#ABB2BF">    &gt;</span></span>
<span class="line"><span style="color:#ABB2BF">      토글</span></span>
<span class="line"><span style="color:#ABB2BF">    &lt;/</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF">  );</span></span>
<span class="line"><span style="color:#ABB2BF">};</span></span></code></pre>
<pre class="astro-code" style="background-color:#282c34;overflow-x:auto"><code><span class="line"><span style="color:#D19A66">.toggle-button</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  background: </span><span style="color:#D19A66">yellow</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E06C75">&amp;</span><span style="color:#D19A66">.active</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">    background: </span><span style="color:#D19A66">red</span><span style="color:#ABB2BF">;</span></span>
<span class="line"><span style="color:#ABB2BF">  }</span></span>
<span class="line"><span style="color:#ABB2BF">}</span></span></code></pre>
<pre class="astro-code" style="background-color:#282c34;overflow-x:auto"><code><span class="line"><span style="color:#61AFEF">describe</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#39;토글버튼 테스트&#39;</span><span style="color:#ABB2BF">, () </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">it</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#39;초기에는 노랑색이다.&#39;</span><span style="color:#ABB2BF">, () </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#61AFEF">render</span><span style="color:#ABB2BF">(&lt;</span><span style="color:#E5C07B">ToggleButton</span><span style="color:#ABB2BF"> /&gt;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">button</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">screen</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getByRole</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#39;button&#39;</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#61AFEF">expect</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">).</span><span style="color:#E5C07B">not</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">toHaveClass</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#39;active&#39;</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">it</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#39;클릭하면 빨강색이다.&#39;</span><span style="color:#ABB2BF">, () </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#61AFEF">render</span><span style="color:#ABB2BF">(&lt;</span><span style="color:#E5C07B">ToggleButton</span><span style="color:#ABB2BF"> /&gt;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">button</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">screen</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getByRole</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#39;button&#39;</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#E5C07B">fireEvent</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">click</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF">    </span><span style="color:#61AFEF">expect</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">toHaveClass</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#39;active&#39;</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">  });</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span></code></pre>
<p>이 테스트 자체는 아무런 문제도 없다. 그런데 만약 <code>scss</code>에서 <code>background</code>를 <code>yellow</code>에서 <code>blue</code>로 변경한다면? 그래도 정상동작하는게 문제다. 이 점에서 css-in-js로 스타일을 주입하고 테스트하는게 더 정확하긴 하다. (물론 이건 예시고 컬러값, 픽셀값까지 테스트하는건 좀 아닌 듯함)</p>
<p>쿼리 우선순위에 대해 말하다보니 빙 돌아왔는데, 요점은 <strong>사용자 관점에서 테스트를 작성하자</strong>는 것이다.</p>
<h3 id="쿼리-우선순위를-지키면서-신뢰도-높은-테스트코드를-작성하는-방법">쿼리 우선순위를 지키면서 신뢰도 높은 테스트코드를 작성하는 방법<a class="autolink" aria-hidden="true" tabIndex="-1" href="#쿼리-우선순위를-지키면서-신뢰도-높은-테스트코드를-작성하는-방법"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h3>
<ul>
<li><code>html(jsx)</code>을 잘 작성한다<br/>
<code>html</code>이 프로그래밍 언어가 아니라는 유머에 웃을때가 아님👻👻</li>
<li><a href="https://testing-playground.com" target="_blank" rel="nofollow">testing-playground.com</a>에서 테스트 쿼리에 익숙해지자
<ul>
<li><a href="https://chrome.google.com/webstore/detail/testing-playground/hejbmebodbijjdhflfknehhcgaklhano" target="_blank" rel="nofollow">chrome extension</a>도 있다</li>
</ul>
</li>
</ul>
<h2 id="react-testing-library-사용시-자주하는-실수">react-testing-library 사용시 자주하는 실수<a class="autolink" aria-hidden="true" tabIndex="-1" href="#react-testing-library-사용시-자주하는-실수"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2>
<blockquote>
<p>원문<br/>
<a href="https://kentcdodds.com/blog/common-mistakes-with-react-testing-library" target="_blank" rel="nofollow">https://kentcdodds.com/blog/common-mistakes-with-react-testing-library</a></p>
</blockquote>
<p>몇가지 핵심이라고 생각하는 부분만 가져오고 사견을 붙였는데, 원문을 읽는 것을 추천한다.</p>
<h3 id="가정문-올바르게-쓰기">가정문 올바르게 쓰기<a class="autolink" aria-hidden="true" tabIndex="-1" href="#가정문-올바르게-쓰기"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h3>
<pre class="astro-code" style="background-color:#282c34;overflow-x:auto"><code><span class="line"><span style="color:#C678DD">const</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">button</span><span style="color:#ABB2BF"> </span><span style="color:#56B6C2">=</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">screen</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getByRole</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#39;button&#39;</span><span style="color:#ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF">expect</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">button</span><span style="color:#ABB2BF">.</span><span style="color:#E06C75">disabled</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">toBe</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">true</span><span style="color:#ABB2BF">); </span><span style="color:#7F848E">// ❌</span></span>
<span class="line"><span style="color:#61AFEF">expect</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">).</span><span style="color:#61AFEF">toBeDisabled</span><span style="color:#ABB2BF">(); </span><span style="color:#7F848E">// ✅</span></span></code></pre>
<p><code>jest-dom</code>이 제공하는 <a href="https://github.com/testing-library/jest-dom#custom-matchers" target="_blank" rel="nofollow">matchers</a>들을 활용하는 것을 강추한다. 결과 자체는 동일하지만 실패할 경우 오류 메시지가 다르다.</p>
<h3 id="불필요한-act-사용-️">불필요한 act 사용 🙅‍♀️<a class="autolink" aria-hidden="true" tabIndex="-1" href="#불필요한-act-사용-️"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h3>
<pre class="astro-code" style="background-color:#282c34;overflow-x:auto"><code><span class="line"><span style="color:#61AFEF">act</span><span style="color:#ABB2BF">(() </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> </span><span style="color:#E5C07B">fireEvent</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">click</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">)); </span><span style="color:#7F848E">// ❌</span></span>
<span class="line"><span style="color:#E5C07B">fireEvent</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">click</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">); </span><span style="color:#7F848E">// ✅</span></span></code></pre>
<p>개발자들이 act warning 메시지를 볼 때마다 이런 식으로 <code>act</code>로 감싸려고 하는데 <code>render</code>나 <code>fireEvent</code>는 이미 act로 래핑된 함수라 무의미한 행동이다. 워닝 메시지가 발생한다면 테스트가 종료된 후 상태 변경이 일어난 것 이므로 이에 대한 코드 수정이 필요하다.</p>
<h3 id="쿼리를-올바르게-쓰기">쿼리를 올바르게 쓰기<a class="autolink" aria-hidden="true" tabIndex="-1" href="#쿼리를-올바르게-쓰기"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h3>
<h4 id="byrole를-더-활용하기">*ByRole를 더 활용하기<a class="autolink" aria-hidden="true" tabIndex="-1" href="#byrole를-더-활용하기"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h4>
<pre class="astro-code" style="background-color:#282c34;overflow-x:auto"><code><span class="line"><span style="color:#7F848E">// &lt;button&gt;&lt;span&gt;hello&lt;/span&gt;&lt;span&gt;world&lt;/span&gt;&lt;/button&gt;</span></span>
<span class="line"><span style="color:#E5C07B">screen</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getByText</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">/hello world/</span><span style="color:#C678DD">i</span><span style="color:#ABB2BF">); </span><span style="color:#7F848E">// ❌</span></span>
<span class="line"><span style="color:#E5C07B">screen</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getByRole</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#39;button&#39;</span><span style="color:#ABB2BF">, { </span><span style="color:#E06C75">name</span><span style="color:#ABB2BF">:</span><span style="color:#E06C75"> /hello world/</span><span style="color:#C678DD">i</span><span style="color:#ABB2BF"> }); </span><span style="color:#7F848E">// ✅</span></span></code></pre>
<p>위와 같은 형태의 버튼도 쿼리가 가능하다는 장점이 있다.</p>
<h4 id="접근성-role를-불필요하게-등록하지-않기">접근성 role를 불필요하게 등록하지 않기<a class="autolink" aria-hidden="true" tabIndex="-1" href="#접근성-role를-불필요하게-등록하지-않기"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h4>
<pre class="astro-code" style="background-color:#282c34;overflow-x:auto"><code><span class="line"><span style="color:#ABB2BF">&lt;</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF"> </span><span style="color:#D19A66">role</span><span style="color:#ABB2BF">=</span><span style="color:#98C379">&quot;button&quot;</span><span style="color:#ABB2BF">&gt;Click me&lt;/</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">&gt; // ❌ &lt;</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">&gt;Click me&lt;/</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">&gt; // ✅</span></span></code></pre>
<p>button은 <code>button</code>이라는 <code>role</code>을 가진 요소이므로 등록이 불필요하다. 이와 같이 테스트를 한답시고 함부로 <code>role</code>을 명명하고 등록하면 안된다. 우선 <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility" target="_blank" rel="nofollow">접근성</a>에 대한 충분한 학습이 필요하다.</p>
<h4 id="waitfor-내에서-사이드-이펙트-수행하지-말기">waitFor 내에서 사이드 이펙트 수행하지 말기<a class="autolink" aria-hidden="true" tabIndex="-1" href="#waitfor-내에서-사이드-이펙트-수행하지-말기"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h4>
<pre class="astro-code" style="background-color:#282c34;overflow-x:auto"><code><span class="line"><span style="color:#C678DD">await</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">waitFor</span><span style="color:#ABB2BF">(() </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#E5C07B">fireEvent</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">click</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">); </span><span style="color:#7F848E">// ❌</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">expect</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">screen</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getAllByRole</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#39;listitem&#39;</span><span style="color:#ABB2BF">)).</span><span style="color:#61AFEF">toHaveLength</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">3</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B">fireEvent</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">click</span><span style="color:#ABB2BF">(</span><span style="color:#E06C75">button</span><span style="color:#ABB2BF">); </span><span style="color:#7F848E">// ✅</span></span>
<span class="line"><span style="color:#C678DD">await</span><span style="color:#ABB2BF"> </span><span style="color:#61AFEF">waitFor</span><span style="color:#ABB2BF">(() </span><span style="color:#C678DD">=&gt;</span><span style="color:#ABB2BF"> {</span></span>
<span class="line"><span style="color:#ABB2BF">  </span><span style="color:#61AFEF">expect</span><span style="color:#ABB2BF">(</span><span style="color:#E5C07B">screen</span><span style="color:#ABB2BF">.</span><span style="color:#61AFEF">getAllByRole</span><span style="color:#ABB2BF">(</span><span style="color:#98C379">&#39;listitem&#39;</span><span style="color:#ABB2BF">)).</span><span style="color:#61AFEF">toHaveLength</span><span style="color:#ABB2BF">(</span><span style="color:#D19A66">3</span><span style="color:#ABB2BF">);</span></span>
<span class="line"><span style="color:#ABB2BF">});</span></span></code></pre>
<p><code>waitFor</code>는 수행한 작업으로 인해 가정문이 통과되는 사이에 시간이 걸리는 항목을 위한 것인데, 콜백은 몇번이고 실행될 수 있기 때문에 내부에 side-effect를 작성하면 안된다.</p>
<h2 id="참고">참고<a class="autolink" aria-hidden="true" tabIndex="-1" href="#참고"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="24" height="24" viewBox="0 0 24 24"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg></a></h2>
<ul>
<li><a href="https://kentcdodds.com/blog/common-mistakes-with-react-testing-library" target="_blank" rel="nofollow">https://kentcdodds.com/blog/common-mistakes-with-react-testing-library</a></li>
<li><a href="https://testing-library.com/docs/queries/about#priority" target="_blank" rel="nofollow">https://testing-library.com/docs/queries/about#priority</a></li>
</ul>
  </div>
</article><div class="flex items-center justify-center">
      <applause-button class="applause" multiclap="true" style="width: 58px; height: 58px;" url="https://yrnana.dev/post/2021-08-15-testing-library/"></applause-button>
    </div><div class="flex mt-10 -mb-10">
  <div class="max-w-2/5">
    <a href="2021-08-21-context-api-redux" class="hover:text-violet-700 flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-400 mr-1 flex-shrink-0" fill="none"
  viewBox="0 0 24 24" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
</svg>
          <div>
            <div class="text-xs text-slate-500">Previous</div>
            <div>Context API가 존재하지만 여전히 사람들이 redux와 전역 상태관리 라이브러리를 쓰는 이유</div>
          </div>
        </a>
  </div>
  <div class="max-w-2/5 text-right ml-auto">
    <a href="2021-08-09-scroll-event-raf-throttle" class="hover:text-violet-700 flex items-center">
          <div>
            <div class="text-xs text-slate-500">Next</div>
            <div>scroll event에 rAF throttle을 적용해야할까</div>
          </div>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-400 ml-1 flex-shrink-0" fill="none"
  viewBox="0 0 24 24" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
</svg>
        </a>
  </div>
</div><div class="mt-20 relative" style="min-height:269">
  <script src="https://utteranc.es/client.js" repo="yrnana/yrnana.github.io" issue-term="2021-08-15-testing-library" label="comment" theme="github-light" crossorigin="anonymous" async></script>
</div>
      </main>
      <footer class="mb-4 sm:mb-6 text-center text-slate-700">
  <span class="mr-1 text-sm sm:text-base">
    Copyright &copy; 2023
  </span>
  <span>nana</span>
</footer>
    </div>
    <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  </body></html>