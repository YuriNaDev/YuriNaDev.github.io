{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/post/2021-12-08",
    "result": {"data":{"markdownRemark":{"htmlAst":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{"id":"블로그-옮긴-이유","style":"position:relative;"},"children":[{"type":"text","value":"블로그 옮긴 이유"},{"type":"element","tagName":"a","properties":{"href":"#%EB%B8%94%EB%A1%9C%EA%B7%B8-%EC%98%AE%EA%B8%B4-%EC%9D%B4%EC%9C%A0","ariaLabel":"블로그 옮긴 이유 permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"},"children":[{"type":"element","tagName":"path","properties":{"strokeLineCap":"round","strokeLineJoin":"round","strokeWidth":"2","d":"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://velog.io/@yrnana"},"children":[{"type":"text","value":"velog"}]},{"type":"text","value":"가 편하고 좋긴 한데 코드 블록이 마음에 안들어서 옮겼다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"기술-스택","style":"position:relative;"},"children":[{"type":"text","value":"기술 스택"},{"type":"element","tagName":"a","properties":{"href":"#%EA%B8%B0%EC%88%A0-%EC%8A%A4%ED%83%9D","ariaLabel":"기술 스택 permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"},"children":[{"type":"element","tagName":"path","properties":{"strokeLineCap":"round","strokeLineJoin":"round","strokeWidth":"2","d":"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Gatsby(v4)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"TypeScript"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Tailwind CSS"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"나는 리액트와 타입스크립트의 노예니까 당연히 TS 기반으로 진행하려고 했다. 문제는 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Next.js"}]},{"type":"text","value":"를 쓰느냐, "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Gatsby"}]},{"type":"text","value":"를 쓰느냐 였는데, 요즘 워낙 Next.js가 잘나가다보니 "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/yrnana/yrnana.github.io/tree/v2"},"children":[{"type":"text","value":"처음엔 Next.js로 구축"}]},{"type":"text","value":"했다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"다 만들고보니 블로그 개발 이라는 테마에 있어서 오히려 단점이 몇가지 있었다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"마크다운 파싱 함수, 페이징 api 등 전부 직접 개발해야 함"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"개발모드에서 마크다운을 수정해도 HMR 적용되지 않음"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"postcss 컴파일 속도가 너무 느림"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"SSG 모드에서는 이미지 최적화 기능을 지원하지 않음"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그래서 결국 Gatsby로 갈아 엎었는데 위와 같은 단점을 해결할 수 있었다. Gatsby의 경우 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"GraphQL"}]},{"type":"text","value":"로 마크다운 및 여러가지 파일들을 조회하고 가공할 수 있도록 제공하기 때문에 매우 편리하다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"gatsby","style":"position:relative;"},"children":[{"type":"text","value":"Gatsby"},{"type":"element","tagName":"a","properties":{"href":"#gatsby","ariaLabel":"gatsby permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"},"children":[{"type":"element","tagName":"path","properties":{"strokeLineCap":"round","strokeLineJoin":"round","strokeWidth":"2","d":"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Gatsby는 개발자가 각종 세팅을 쉽게 적용할 수 있도록 여러가지 플러그인을 제공하고 있다. 처음에 마크다운 프로세서 플러그인으로 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"gatsby-plugin-mdx"}]},{"type":"text","value":"를 사용했다가 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"gatsby-transformer-remark"}]},{"type":"text","value":"로 바꿨는데, 이는 일부 플러그인 (e.g. "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"gatsby-remark-katex"}]},{"type":"text","value":")이 디펜던시 문제로 후자에서만 작동하기 때문이다. 알고리즘 관련 포스트를 작성하려면 수식 작성이 필요해서 katex를 버릴 순 없었다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그리고 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"graphql-codegen"}]},{"type":"text","value":"으로 Type을 자동 생성하여 타입스크립트를 십분 활용할 수 있도록 적용했다. 또한 GraphQL 스키마는 대부분 auto detecting을 하는데, "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"gatsby-node.js"}]},{"type":"text","value":"에서 스키마를 직접 지정 & 확장해서 GraphQL를 aggregate도 하고 graphql-codegen의 타입 output을 좀더 명확하게 지정할 수 있었다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"처음엔 ts 파일로 gatsby-* 설정 파일들을 작성했는데, ts-node나 추가 플러그인을 설치해야 하는 점도 별로고 js 파일로 작성해야 초기 로드가 빠를 것 같아서 그냥 js 파일을 사용하고 IDE의 타입 지정 코멘트를 활용했다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"markdown","style":"position:relative;"},"children":[{"type":"text","value":"Markdown"},{"type":"element","tagName":"a","properties":{"href":"#markdown","ariaLabel":"markdown permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"},"children":[{"type":"element","tagName":"path","properties":{"strokeLineCap":"round","strokeLineJoin":"round","strokeWidth":"2","d":"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"블로그이니만큼 가장 공을 들인 부분이 마크다운 프로세싱인데, 사실 Gatsby에서 기본적인 처리는 다 해주기 때문에 부가적인 처리만 해주면 된다. 다만 초기에 Next.js로 개발할 때는 직접 파싱하고 뿌려야 했기 때문에 나름대로 학습을 했다. 마크다운을 처리할때는 보통 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"unified"}]},{"type":"text","value":"라는 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"syntax tree"}]},{"type":"text","value":"로 텍스트를 처리하는 인터페이스를 활용한다. 비단 마크다운만 처리하는 용도는 아니고, markdown, natural language, html 을 지원하고 포맷간 변환을 지원한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/80532db700b376f8ee5ba2e22889c81c/e0885/unified.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 42.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABH0lEQVQoz21S7W6EMAzr+7/hdBsDDgqUUihfx3FsnpypFUL3w2paJ7ETUOO8ImBaHoIQ935CWRno2sT3a94Y3/9P1XY9jHXoeo/srpGkOVo3wLoB5PKiwr2s4IZR7qbrkeYlPm4JCl1LHusJGlDbfuDxfEVFPy0S841c4Hmu2x4dhly+bSdecZxhnKNyVmhxMoyLjKqbVtSbthMHtenw9Z0hzQtUxkpTcnmhpY/iqH5exTqLy9pITAfkqqaVcQkRtk5WwN021klDCtEQnSuOQ6sE43Dn+Tp+JXleN+zHT+TCGs51ceTl8cQVJOja+UlcsikRdvauJkAFlXMiFdmAX/wzSXFLUtkbxyZ3Fr7ibUPG3Bc/jpVfyEtMkWveteEfoiuxrV30WBEAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"unified","title":"unified","src":"/static/80532db700b376f8ee5ba2e22889c81c/5a190/unified.png","srcSet":["/static/80532db700b376f8ee5ba2e22889c81c/772e8/unified.png 200w","/static/80532db700b376f8ee5ba2e22889c81c/e17e5/unified.png 400w","/static/80532db700b376f8ee5ba2e22889c81c/5a190/unified.png 800w","/static/80532db700b376f8ee5ba2e22889c81c/e0885/unified.png 918w"],"sizes":"(max-width: 800px) 100vw, 800px","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy","decoding":"async"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"input을 parser를 통해 syntax tree로 파싱하고 이 tree를 transformer를 통해 가공한 뒤 compiler로 output을 만들 수 있다. 즉, 마크다운 파일이 input이라면 이를 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"mdast(markdown syntax tree)"}]},{"type":"text","value":"로 만들고 여기에 어떠한 처리 (e.g. autolink) 를 한 뒤 html string으로 변환하는 것이다. 아니면 mdast를 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"hast(html syntax tree)"}]},{"type":"text","value":"로 바꾸고 가공 후 html으로 변환해도 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"GraphQL에서 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"html"}]},{"type":"text","value":"과 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"htmlAst(hast)"}]},{"type":"text","value":" 두가지를 제공하는데, 나는 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"dangerouslySetInnerHTML"}]},{"type":"text","value":"을 사용해서 html을 출력하는 대신 위의 stringify 단계를 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"rehype-react"}]},{"type":"text","value":"라는 컴파일러로 처리했다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"또한 Gatsby v4에서 지원하지 않는 일부 플러그인을 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"<root>/plugins"}]},{"type":"text","value":"에 직접 작성해서 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"gatsby-config.js"}]},{"type":"text","value":"에 적용했는데, 이 때 주의할 점은 현재 unified 관련 패키지들은 전부 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"ESM only"}]},{"type":"text","value":" 인데 "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"gatsby-config.js"}]},{"type":"text","value":"는 노드 환경에서 돌아가기 때문에 오류가 난다. 따라서 이 패키지들은 cjs를 지원하는 낮은 버전으로 다운그레이드 해서 설치해야 한다. (e.g. "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"remark-breaks"}]},{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"이사-한달-후기","style":"position:relative;"},"children":[{"type":"text","value":"이사 한달 후기"},{"type":"element","tagName":"a","properties":{"href":"#%EC%9D%B4%EC%82%AC-%ED%95%9C%EB%8B%AC-%ED%9B%84%EA%B8%B0","ariaLabel":"이사 한달 후기 permalink","className":["anchor","after"]},"children":[{"type":"element","tagName":"svg","properties":{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"},"children":[{"type":"element","tagName":"path","properties":{"strokeLineCap":"round","strokeLineJoin":"round","strokeWidth":"2","d":"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"lighthouse에서 SEO 만점이 나오는데도 검색에 안 걸린다ㅠㅠ"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n벨로그는 검색에 정말 잘 걸리는게 큰 장점인듯..."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n그리고 좋아요 같은 기능을 붙이고 싶어서 언젠가는 SSR로 옮길까 하고 도메인을 붙였다."}]}],"data":{"quirksMode":false}},"excerpt":"블로그 옮긴 이유 velog가 편하고 좋긴 한데 코드 블록이 마음에 안들어서 옮겼다. 기술 스택 Gatsby(v4) TypeScript Tailwind CSS 나는 리액트와 타입스크립트의 노예니까 당연히 TS 기반으로 진행하려고 했다. 문제는 Next.js를 쓰느냐,…","frontmatter":{"title":"블로그 이사 후기","date":"2021-12-08T10:54:27+09:00","tags":["etc"],"excerpt":"velog에서 깃헙 블로그로 이사한 이유와 개발 후기","preview":null}}},"pageContext":{"id":"79c3944b-cfd2-546b-b90d-42e8fd750148","next":{"slug":"/post/2021-12-09-next.js","frontmatter":{"title":"Next.js에서 카카오맵 사용하기"}},"previous":{"slug":"/post/2021-11-28-lodash-lodash-es","frontmatter":{"title":"lodash 대신 lodash-es 쓰자"}}}},
    "staticQueryHashes": ["1957264973","5457840"]}