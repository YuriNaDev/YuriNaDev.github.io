{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/post/2021-03-24-table-of-contents-using-intersection-observer-api",
    "result": {"data":{"mdx":{"excerpt":"Table Of Contents는 목차를 의미하고, Intersection Observer API는 타겟요소가 상위요소(또는 viewport)와 Intersect 하는지 관찰하는 기능을 제공하는 Web API다.","frontmatter":{"title":"Table Of Contents using Intersection Observer API","date":"2021-03-24T23:05:36+09:00","excerpt":"Table Of Contents는 목차를 의미하고, Intersection Observer API는 타겟요소가 상위요소(또는 viewport)와 Intersect 하는지 관찰하는 기능을 제공하는 Web API다.","tags":["React","Table Of Contents","Intersection Observer API"],"preview":null},"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Table Of Contents using Intersection Observer API\",\n  \"date\": \"2021-03-24T23:05:36+09:00\",\n  \"excerpt\": \"Table Of Contents는 목차를 의미하고, Intersection Observer API는 타겟요소가 상위요소(또는 viewport)와 Intersect 하는지 관찰하는 기능을 제공하는 Web API다.\",\n  \"tags\": [\"React\", \"Table Of Contents\", \"Intersection Observer API\"],\n  \"published\": true\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Table Of Contents\"), \"\\uB294 \\uBAA9\\uCC28\\uB97C \\uC758\\uBBF8\\uD558\\uACE0, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://velog.io/@yrnana/Intersection-Observer-API\"\n  }, \"Intersection Observer API\"), \"\\uB294 \\uD0C0\\uAC9F\\uC694\\uC18C\\uAC00 \\uC0C1\\uC704\\uC694\\uC18C(\\uB610\\uB294 viewport)\\uC640 Intersect \\uD558\\uB294\\uC9C0 \\uAD00\\uCC30\\uD558\\uB294 \\uAE30\\uB2A5\\uC744 \\uC81C\\uACF5\\uD558\\uB294 Web API\\uB2E4.\"), mdx(\"p\", null, \"\\uAD6C\\uD604\\uD574\\uC57C \\uD560 \\uAE30\\uB2A5\\uACFC \\uBC29\\uBC95\\uC744 \\uC0DD\\uAC01\\uD574\\uBCF4\\uBA74\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\uAE00\\uC5D0\\uC11C \\uD5E4\\uB354(\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"h1\"), \"~\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"h6\"), \")\\uB97C \\uBF51\\uC544\\uC11C \\uBAA9\\uCC28 \\uBAA9\\uB85D\\uC744 \\uC0DD\\uC131\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"IntersectionObserver\"), \" \\uC778\\uC2A4\\uD134\\uC2A4\\uB97C \\uC0DD\\uC131\\uD558\\uACE0 \\uD5E4\\uB354\\uB4E4\\uC744 \\uAD00\\uCC30\\uD558\\uB3C4\\uB85D \\uD568\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"viewport \\uB0B4\\uC5D0 \\uBCF4\\uC5EC\\uC9C0\\uB294 \\uD5E4\\uB354\\uB4E4 \\uC911 \\uAC00\\uC7A5 \\uC0C1\\uC704 \\uD5E4\\uB354\\uB97C \\uAE30\\uC900\\uC73C\\uB85C \\uD65C\\uC131\\uD654 \\uBAA9\\uCC28\\uB97C \\uACB0\\uC815\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\uBAA9\\uCC28 \\uC544\\uC774\\uD15C \\uD074\\uB9AD \\uC2DC \\uD5E4\\uB354 \\uC704\\uCE58\\uB85C \\uC774\\uB3D9\")), mdx(\"p\", null, \"\\uBAA9\\uCC28 \\uC544\\uC774\\uD15C\\uC740 \\uB2E4\\uC74C\\uACFC \\uAC19\\uC740 \\uC778\\uD130\\uD398\\uC774\\uC2A4\\uB97C \\uAC00\\uC9C4\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"hljs language-tsx\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"export\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"interface\"), \" TableOfContent {\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-attr\"\n  }, \"index\"), \": \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-built_in\"\n  }, \"number\"), \"; \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// key\\uB85C \\uD65C\\uC6A9 \\uAC00\\uB2A5\\uD55C \\uBAA9\\uCC28 index\"), \"\\n  text: \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-built_in\"\n  }, \"string\"), \"; \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// \\uBAA9\\uCC28 \\uCEE8\\uD150\\uCE20\"), \"\\n  marginLeft: \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-built_in\"\n  }, \"number\"), \"; \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// h1\\uC774\\uBA74 0px, h6\\uC774\\uBA74 50px\"), \"\\n  offsetTop: \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-built_in\"\n  }, \"number\"), \"; \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// \\uD5E4\\uB354\\uC758 y \\uC704\\uCE58\"), \"\\n}\\n\")), mdx(\"p\", null, \"\\uD5E4\\uB354\\uB4E4\\uC758 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"offsetTop\"), \"\\uC744 \\uD55C\\uBC88\\uB9CC \\uC77D\\uACE0 \\uB05D\\uB0B4\\uAE30 \\uC704\\uD574\\uC11C \\uBAA9\\uCC28 \\uC815\\uBCF4\\uC5D0 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"offsetTop\"), \"\\uC744 \\uC800\\uC7A5\\uD558\\uB294\\uB370, \\uC774\\uB97C \\uC624\\uCC28 \\uC5C6\\uC774 \\uC0AC\\uC6A9\\uD558\\uB824\\uBA74 \\uC800\\uC7A5\\uD55C \\uD6C4\\uC5D0 \\uB0B4\\uBD80\\uC5D0\\uC11C height \\uBCC0\\uB3D9\\uC774 \\uC5C6\\uC5B4\\uC57C \\uD55C\\uB2E4. (\\uC608\\uB97C \\uB4E4\\uBA74 lazy loading\\uC774 \\uB418\\uB294 \\uC774\\uBBF8\\uC9C0\\uAC00 \\uC788\\uB2E4\\uBA74 Layout Shift\\uAC00 \\uBC1C\\uC0DD\\uD558\\uC9C0 \\uC54A\\uB3C4\\uB85D \\uC8FC\\uC758\\uD574\\uC57C \\uD55C\\uB2E4)\"), mdx(\"p\", null, \"\\uBAA9\\uCC28\\uB294 \\uB531 \\uD558\\uB098\\uB9CC \\uD65C\\uC131\\uD654 \\uB418\\uC5B4\\uC57C \\uD558\\uB294\\uB370, viewport \\uAE30\\uC900 \\uAC00\\uC7A5 \\uC704\\uC758 \\uD5E4\\uB354 \\uB610\\uB294 \\uD574\\uB2F9\\uD558\\uB294 \\uCEE8\\uD150\\uCE20\\uC758 \\uD5E4\\uB354 index\\uAC00 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"activeIndex\"), \"\\uAC00 \\uB41C\\uB2E4. \\uC774\\uB97C \\uACC4\\uC0B0\\uD558\\uAE30 \\uC704\\uD574 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"IntersectionObserver\"), \" \\uC778\\uC2A4\\uD134\\uC2A4 \\uB0B4\\uBD80\\uC5D0\\uC11C \\uC804\\uB2EC\\uBC1B\\uB294 entries \\uC815\\uBCF4\\uB97C \\uD55C\\uBC88 \\uD769\\uC5B4\\uC11C \\uBC30\\uC5F4(=\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"intersectingList\"), \")\\uC5D0 \\uAD50\\uCC28 \\uC5EC\\uBD80\\uB97C \\uC800\\uC7A5\\uD55C\\uB2E4. \\uC608\\uB97C \\uB4E4\\uBA74 \\uC774 \\uBC30\\uC5F4\\uC5D0\\uC11C \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"intersectingList[2]\"), \"\\uB294 \\uD604\\uC7AC 3\\uBC88\\uC9F8 \\uD5E4\\uB354\\uC758 viewport \\uAD50\\uCC28 \\uC5EC\\uBD80\\uB97C \\uB098\\uD0C0\\uB0B4\\uAC8C \\uB41C\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"hljs language-ts\"\n  }, \"entries.forEach(\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-function\"\n  }, \"(\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"hljs-params\"\n  }, \"{ target, isIntersecting }\"), \") =>\"), \" {\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"const\"), \" idx = \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-built_in\"\n  }, \"Number\"), \"((target \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"as\"), \" HTMLElement).dataset.id || \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"0\"), \");\\n  intersectingList[idx] = isIntersecting;\\n});\\n\")), mdx(\"p\", null, \"\\uC774\\uD6C4 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"intersectingList\"), \"\\uC758 item \\uC911 \\uAC00\\uC7A5 \\uCC98\\uC74C\\uC73C\\uB85C true\\uAC00 \\uB418\\uB294 \\uC778\\uB371\\uC2A4\\uB97C \\uCC3E\\uB294\\uB2E4. \\uC774\\uB807\\uAC8C \\uD558\\uBA74 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"O(2n)\"), \"\\uC73C\\uB85C \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"activeIndex\"), \"\\uB97C \\uCC3E\\uC744 \\uC218 \\uC788\\uB2E4. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"threshold\"), \"\\uB97C \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"1.0\"), \"\\uC73C\\uB85C \\uC9C0\\uC815\\uD558\\uBA74 \\uC694\\uC18C \\uC804\\uCCB4\\uAC00 \\uBCF4\\uC5EC\\uC57C true\\uB85C \\uC7A1\\uD788\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC704\\uC5D0\\uC11C \\uCC3E\\uC740 index\\uC5D0\\uC11C 1\\uC744 \\uAC10\\uD558\\uBA74 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"activeIndex\"), \"\\uAC00 \\uB41C\\uB2E4. (\\uC774\\uB807\\uAC8C \\uCC3E\\uB294 \\uC774\\uC720\\uB294 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"n\"), \"\\uBC88\\uC9F8 \\uD5E4\\uB354\\uB294 \\uBCF4\\uC774\\uC9C0 \\uC54A\\uACE0 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"n\"), \"\\uBC88\\uC9F8 \\uD5E4\\uB354\\uC758 \\uCEE8\\uD150\\uCE20\\uB9CC \\uBCF4\\uC774\\uB354\\uB77C\\uB3C4 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"activeIndex\"), \"\\uB294 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"n\"), \"\\uC774\\uC5B4\\uC57C \\uD558\\uAE30 \\uB54C\\uBB38\\uC774\\uB2E4)\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"hljs language-ts\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"const\"), \" currentIndex = intersectingList.findIndex(\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-function\"\n  }, \"(\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"hljs-params\"\n  }, \"item\"), \") =>\"), \" item);\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"let\"), \" activeIndex = currentIndex - \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"1\"), \";\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"if\"), \" (currentIndex === -\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"1\"), \") {\\n  activeIndex = intersectingList.length - \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"1\"), \"; \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// \\uCC3E\\uC744 \\uC218 \\uC5C6\\uB294 \\uACBD\\uC6B0 \\uB9C8\\uC9C0\\uB9C9 \\uC778\\uB371\\uC2A4\\uB85C \\uC9C0\\uC815\"), \"\\n} \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"else\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"if\"), \" (currentIndex === \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"0\"), \") {\\n  activeIndex = \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"0\"), \"; \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// \\uC778\\uB371\\uC2A4\\uB294 0 \\uC774\\uC0C1\\uC774\\uC5B4\\uC57C \\uD55C\\uB2E4\"), \"\\n}\\nsetActiveIndex(activeIndex);\\n\")), mdx(\"p\", null, \"\\uC774 \\uB85C\\uC9C1\\uC744 \\uD6C5\\uC73C\\uB85C \\uAD6C\\uD604\\uD558\\uBA74 \\uB2E4\\uC74C\\uACFC \\uAC19\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"hljs language-ts\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"const\"), \" useTableOfContents = \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-function\"\n  }, \"() =>\"), \" {\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"const\"), \" contentRef = useRef<HTMLElement>(\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-literal\"\n  }, \"null\"), \");\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"const\"), \" intersectingListRef = useRef<\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-built_in\"\n  }, \"boolean\"), \"[]>([]); \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// isIntersecting array\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"const\"), \" [tableOfContents, setTableOfContents] = useState<TableOfContent[]>([]);\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"const\"), \" [activeIndex, setActiveIndex] = useState(\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"0\"), \");\\n\\n  useEffect(\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-function\"\n  }, \"() =>\"), \" {\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"const\"), \" intersectingList = intersectingListRef.current;\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"const\"), \" content = contentRef.current!;\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"const\"), \" headers = content.querySelectorAll<HTMLElement>(\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-string\"\n  }, \"'h1, h2, h3, h4, h5, h6'\"), \",\\n    ); \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// all headers\"), \"\\n\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// set TableOfContents\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"const\"), \" tocData = \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-built_in\"\n  }, \"Array\"), \".from(headers).map<TableOfContent>(\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-function\"\n  }, \"(\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"hljs-params\"\n  }, \"header, i\"), \") =>\"), \" ({\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-attr\"\n  }, \"index\"), \": i,\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-attr\"\n  }, \"text\"), \": header.textContent || \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-string\"\n  }, \"''\"), \",\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-attr\"\n  }, \"marginLeft\"), \": (\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-built_in\"\n  }, \"Number\"), \"(header.tagName.charAt(\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"1\"), \")) - \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"1\"), \") * \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"10\"), \",\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-attr\"\n  }, \"offsetTop\"), \": header.offsetTop + \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"2\"), \", \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// have to down little bit\"), \"\\n    }));\\n    setTableOfContents(tocData);\\n\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// create IntersectionObserver\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"const\"), \" observer = \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"new\"), \" IntersectionObserver(\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-function\"\n  }, \"(\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"hljs-params\"\n  }, \"entries\"), \") =>\"), \" {\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// save isIntersecting info to array using data-id\"), \"\\n        entries.forEach(\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-function\"\n  }, \"(\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"hljs-params\"\n  }, \"{ target, isIntersecting }\"), \") =>\"), \" {\\n          \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"const\"), \" idx = \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-built_in\"\n  }, \"Number\"), \"((target \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"as\"), \" HTMLElement).dataset.id || \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"0\"), \");\\n          intersectingList[idx] = isIntersecting;\\n        });\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// get activeIndex\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"const\"), \" currentIndex = intersectingList.findIndex(\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-function\"\n  }, \"(\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"hljs-params\"\n  }, \"item\"), \") =>\"), \" item);\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"let\"), \" activeIndex = currentIndex - \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"1\"), \";\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"if\"), \" (currentIndex === -\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"1\"), \") {\\n          activeIndex = intersectingList.length - \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"1\"), \";\\n        } \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"else\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"if\"), \" (currentIndex === \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"0\"), \") {\\n          activeIndex = \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"0\"), \";\\n        }\\n        setActiveIndex(activeIndex);\\n      },\\n      { \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-attr\"\n  }, \"threshold\"), \": \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"1\"), \" },\\n    );\\n\\n    headers.forEach(\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-function\"\n  }, \"(\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"hljs-params\"\n  }, \"header, i\"), \") =>\"), \" {\\n      header.setAttribute(\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-string\"\n  }, \"'data-id'\"), \", i.toString()); \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// set data-id\"), \"\\n      intersectingList.push(\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-literal\"\n  }, \"false\"), \"); \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// increase array length\"), \"\\n      observer.observe(header); \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// register to observe\"), \"\\n    });\\n\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-function\"\n  }, \"() =>\"), \" {\\n      observer.disconnect();\\n      intersectingList.length = \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-number\"\n  }, \"0\"), \"; \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-comment\"\n  }, \"// empty array\"), \"\\n    };\\n  }, []);\\n\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"hljs-keyword\"\n  }, \"return\"), \" {\\n    contentRef,\\n    tableOfContents,\\n    activeIndex,\\n  };\\n};\\n\")), mdx(\"p\", null, \"\\uC774 \\uD6C5\\uC744 \\uC0AC\\uC6A9\\uD55C \\uBAA9\\uCC28\\uB97C \\uAD6C\\uD604\\uD588\\uB354\\uB2C8 \\uBB54\\uAC00 \\uC090\\uAC71\\uC090\\uAC71..\"), mdx(\"iframe\", {\n    \"src\": \"https://codesandbox.io/embed/tableofcontents-using-intersection-observer-api-in-react-0jcox\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"500px\",\n      \"border\": \"0\",\n      \"borderRadius\": \"4px\",\n      \"overflow\": \"hidden\"\n    },\n    \"allow\": \"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\",\n    \"sandbox\": \"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n  }));\n}\n;\nMDXContent.isMDXComponent = true;"}},"pageContext":{"id":"cebbeaf8-96d4-5c07-bc35-d99fda568cd4","next":{"slug":"2021-03-25-offsettop-reflow","frontmatter":{"title":"OffsetTop을 읽으면 reflow가 발생한다?"}},"previous":{"slug":"2021-03-21-prettier-eslint","frontmatter":{"title":"prettier와 eslint를 구분해서 사용하자"}}}},
    "staticQueryHashes": ["1598546928","1957264973","5457840"]}